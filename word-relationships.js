// Word Relationships - Synonyms and Antonyms
class WordRelationships {
    constructor(game) {
        this.game = game;

        // –ë–∞–∑–∞ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫)
        this.synonyms = {
            '–ª—é–±–æ–≤—å': ['—Å—Ç—Ä–∞—Å—Ç—å', '–ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å', '—á—É–≤—Å—Ç–≤–æ', '–Ω–µ–∂–Ω–æ—Å—Ç—å'],
            '—Å—Ç—Ä–∞—Å—Ç—å': ['–ª—é–±–æ–≤—å', '–ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å', '—á—É–≤—Å—Ç–≤–æ', '–Ω–µ–∂–Ω–æ—Å—Ç—å'],
            '–ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å': ['–ª—é–±–æ–≤—å', '—Å—Ç—Ä–∞—Å—Ç—å', '—á—É–≤—Å—Ç–≤–æ', '–Ω–µ–∂–Ω–æ—Å—Ç—å'],
            '—á—É–≤—Å—Ç–≤–æ': ['–ª—é–±–æ–≤—å', '—Å—Ç—Ä–∞—Å—Ç—å', '–ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å', '–Ω–µ–∂–Ω–æ—Å—Ç—å'],
            '–Ω–µ–∂–Ω–æ—Å—Ç—å': ['–ª—é–±–æ–≤—å', '—Å—Ç—Ä–∞—Å—Ç—å', '–ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å', '—á—É–≤—Å—Ç–≤–æ'],

            '—Ä–∞–¥–æ—Å—Ç—å': ['—Å—á–∞—Å—Ç—å–µ', '–≤–µ—Å–µ–ª—å–µ', '–≤–æ—Å—Ç–æ—Ä–≥', '–ª–∏–∫–æ–≤–∞–Ω–∏–µ'],
            '—Å—á–∞—Å—Ç—å–µ': ['—Ä–∞–¥–æ—Å—Ç—å', '–≤–µ—Å–µ–ª—å–µ', '–≤–æ—Å—Ç–æ—Ä–≥', '–ª–∏–∫–æ–≤–∞–Ω–∏–µ'],
            '–≤–µ—Å–µ–ª—å–µ': ['—Ä–∞–¥–æ—Å—Ç—å', '—Å—á–∞—Å—Ç—å–µ', '–≤–æ—Å—Ç–æ—Ä–≥', '–ª–∏–∫–æ–≤–∞–Ω–∏–µ'],
            '–≤–æ—Å—Ç–æ—Ä–≥': ['—Ä–∞–¥–æ—Å—Ç—å', '—Å—á–∞—Å—Ç—å–µ', '–≤–µ—Å–µ–ª—å–µ', '–ª–∏–∫–æ–≤–∞–Ω–∏–µ'],
            '–ª–∏–∫–æ–≤–∞–Ω–∏–µ': ['—Ä–∞–¥–æ—Å—Ç—å', '—Å—á–∞—Å—Ç—å–µ', '–≤–µ—Å–µ–ª—å–µ', '–≤–æ—Å—Ç–æ—Ä–≥'],

            '–≥—Ä—É—Å—Ç—å': ['–ø–µ—á–∞–ª—å', '—Ç–æ—Å–∫–∞', '—É–Ω—ã–Ω–∏–µ', '—Å–∫–æ—Ä–±—å'],
            '–ø–µ—á–∞–ª—å': ['–≥—Ä—É—Å—Ç—å', '—Ç–æ—Å–∫–∞', '—É–Ω—ã–Ω–∏–µ', '—Å–∫–æ—Ä–±—å'],
            '—Ç–æ—Å–∫–∞': ['–≥—Ä—É—Å—Ç—å', '–ø–µ—á–∞–ª—å', '—É–Ω—ã–Ω–∏–µ', '—Å–∫–æ—Ä–±—å'],
            '—É–Ω—ã–Ω–∏–µ': ['–≥—Ä—É—Å—Ç—å', '–ø–µ—á–∞–ª—å', '—Ç–æ—Å–∫–∞', '—Å–∫–æ—Ä–±—å'],
            '—Å–∫–æ—Ä–±—å': ['–≥—Ä—É—Å—Ç—å', '–ø–µ—á–∞–ª—å', '—Ç–æ—Å–∫–∞', '—É–Ω—ã–Ω–∏–µ'],

            '—Å–≤–µ—Ç': ['—Å–∏—è–Ω–∏–µ', '–±–ª–µ—Å–∫', '—è—Ä–∫–æ—Å—Ç—å', '—Å–≤–µ—Ç–ª–æ—Å—Ç—å'],
            '—Å–∏—è–Ω–∏–µ': ['—Å–≤–µ—Ç', '–±–ª–µ—Å–∫', '—è—Ä–∫–æ—Å—Ç—å', '—Å–≤–µ—Ç–ª–æ—Å—Ç—å'],
            '–±–ª–µ—Å–∫': ['—Å–≤–µ—Ç', '—Å–∏—è–Ω–∏–µ', '—è—Ä–∫–æ—Å—Ç—å', '—Å–≤–µ—Ç–ª–æ—Å—Ç—å'],
            '—è—Ä–∫–æ—Å—Ç—å': ['—Å–≤–µ—Ç', '—Å–∏—è–Ω–∏–µ', '–±–ª–µ—Å–∫', '—Å–≤–µ—Ç–ª–æ—Å—Ç—å'],
            '—Å–≤–µ—Ç–ª–æ—Å—Ç—å': ['—Å–≤–µ—Ç', '—Å–∏—è–Ω–∏–µ', '–±–ª–µ—Å–∫', '—è—Ä–∫–æ—Å—Ç—å'],

            '—Ç—å–º–∞': ['–º—Ä–∞–∫', '—Ç–µ–º–Ω–æ—Ç–∞', '—á–µ—Ä–Ω–æ—Ç–∞', '—Å—É–º—Ä–∞–∫'],
            '–º—Ä–∞–∫': ['—Ç—å–º–∞', '—Ç–µ–º–Ω–æ—Ç–∞', '—á–µ—Ä–Ω–æ—Ç–∞', '—Å—É–º—Ä–∞–∫'],
            '—Ç–µ–º–Ω–æ—Ç–∞': ['—Ç—å–º–∞', '–º—Ä–∞–∫', '—á–µ—Ä–Ω–æ—Ç–∞', '—Å—É–º—Ä–∞–∫'],
            '—á–µ—Ä–Ω–æ—Ç–∞': ['—Ç—å–º–∞', '–º—Ä–∞–∫', '—Ç–µ–º–Ω–æ—Ç–∞', '—Å—É–º—Ä–∞–∫'],
            '—Å—É–º—Ä–∞–∫': ['—Ç—å–º–∞', '–º—Ä–∞–∫', '—Ç–µ–º–Ω–æ—Ç–∞', '—á–µ—Ä–Ω–æ—Ç–∞'],

            '—Å–∏–ª–∞': ['–º–æ—â—å', '—ç–Ω–µ—Ä–≥–∏—è', '–≤–ª–∞—Å—Ç—å', '–º–æ–≥—É—â–µ—Å—Ç–≤–æ'],
            '–º–æ—â—å': ['—Å–∏–ª–∞', '—ç–Ω–µ—Ä–≥–∏—è', '–≤–ª–∞—Å—Ç—å', '–º–æ–≥—É—â–µ—Å—Ç–≤–æ'],
            '—ç–Ω–µ—Ä–≥–∏—è': ['—Å–∏–ª–∞', '–º–æ—â—å', '–≤–ª–∞—Å—Ç—å', '–º–æ–≥—É—â–µ—Å—Ç–≤–æ'],
            '–≤–ª–∞—Å—Ç—å': ['—Å–∏–ª–∞', '–º–æ—â—å', '—ç–Ω–µ—Ä–≥–∏—è', '–º–æ–≥—É—â–µ—Å—Ç–≤–æ'],
            '–º–æ–≥—É—â–µ—Å—Ç–≤–æ': ['—Å–∏–ª–∞', '–º–æ—â—å', '—ç–Ω–µ—Ä–≥–∏—è', '–≤–ª–∞—Å—Ç—å'],

            '—Å–ª–∞–±–æ—Å—Ç—å': ['–±–µ—Å—Å–∏–ª–∏–µ', '–Ω–µ–º–æ—â—å', '—Ö–∏–ª–æ—Å—Ç—å', '–≤—è–ª–æ—Å—Ç—å'],
            '–±–µ—Å—Å–∏–ª–∏–µ': ['—Å–ª–∞–±–æ—Å—Ç—å', '–Ω–µ–º–æ—â—å', '—Ö–∏–ª–æ—Å—Ç—å', '–≤—è–ª–æ—Å—Ç—å'],
            '–Ω–µ–º–æ—â—å': ['—Å–ª–∞–±–æ—Å—Ç—å', '–±–µ—Å—Å–∏–ª–∏–µ', '—Ö–∏–ª–æ—Å—Ç—å', '–≤—è–ª–æ—Å—Ç—å'],
            '—Ö–∏–ª–æ—Å—Ç—å': ['—Å–ª–∞–±–æ—Å—Ç—å', '–±–µ—Å—Å–∏–ª–∏–µ', '–Ω–µ–º–æ—â—å', '–≤—è–ª–æ—Å—Ç—å'],
            '–≤—è–ª–æ—Å—Ç—å': ['—Å–ª–∞–±–æ—Å—Ç—å', '–±–µ—Å—Å–∏–ª–∏–µ', '–Ω–µ–º–æ—â—å', '—Ö–∏–ª–æ—Å—Ç—å'],

            '–¥–æ–±—Ä–æ': ['–±–ª–∞–≥–æ', '–¥–æ–±—Ä–æ—Ç–∞', '–º–∏–ª–æ—Å–µ—Ä–¥–∏–µ', '–±–ª–∞–≥–æ—Å—Ç—å'],
            '–±–ª–∞–≥–æ': ['–¥–æ–±—Ä–æ', '–¥–æ–±—Ä–æ—Ç–∞', '–º–∏–ª–æ—Å–µ—Ä–¥–∏–µ', '–±–ª–∞–≥–æ—Å—Ç—å'],
            '–¥–æ–±—Ä–æ—Ç–∞': ['–¥–æ–±—Ä–æ', '–±–ª–∞–≥–æ', '–º–∏–ª–æ—Å–µ—Ä–¥–∏–µ', '–±–ª–∞–≥–æ—Å—Ç—å'],
            '–º–∏–ª–æ—Å–µ—Ä–¥–∏–µ': ['–¥–æ–±—Ä–æ', '–±–ª–∞–≥–æ', '–¥–æ–±—Ä–æ—Ç–∞', '–±–ª–∞–≥–æ—Å—Ç—å'],
            '–±–ª–∞–≥–æ—Å—Ç—å': ['–¥–æ–±—Ä–æ', '–±–ª–∞–≥–æ', '–¥–æ–±—Ä–æ—Ç–∞', '–º–∏–ª–æ—Å–µ—Ä–¥–∏–µ'],

            '–∑–ª–æ': ['–≤—Ä–µ–¥', '–∑–ª–æ–±–∞', '–∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å', '–ø–æ—Ä–æ–∫'],
            '–≤—Ä–µ–¥': ['–∑–ª–æ', '–∑–ª–æ–±–∞', '–∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å', '–ø–æ—Ä–æ–∫'],
            '–∑–ª–æ–±–∞': ['–∑–ª–æ', '–≤—Ä–µ–¥', '–∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å', '–ø–æ—Ä–æ–∫'],
            '–∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å': ['–∑–ª–æ', '–≤—Ä–µ–¥', '–∑–ª–æ–±–∞', '–ø–æ—Ä–æ–∫'],
            '–ø–æ—Ä–æ–∫': ['–∑–ª–æ', '–≤—Ä–µ–¥', '–∑–ª–æ–±–∞', '–∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å'],

            '–º–∏—Ä': ['–ø–æ–∫–æ–π', '—Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ', '—Ç–∏—à–∏–Ω–∞', '–≥–∞—Ä–º–æ–Ω–∏—è'],
            '–ø–æ–∫–æ–π': ['–º–∏—Ä', '—Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ', '—Ç–∏—à–∏–Ω–∞', '–≥–∞—Ä–º–æ–Ω–∏—è'],
            '—Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ': ['–º–∏—Ä', '–ø–æ–∫–æ–π', '—Ç–∏—à–∏–Ω–∞', '–≥–∞—Ä–º–æ–Ω–∏—è'],
            '—Ç–∏—à–∏–Ω–∞': ['–º–∏—Ä', '–ø–æ–∫–æ–π', '—Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ', '–≥–∞—Ä–º–æ–Ω–∏—è'],
            '–≥–∞—Ä–º–æ–Ω–∏—è': ['–º–∏—Ä', '–ø–æ–∫–æ–π', '—Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ', '—Ç–∏—à–∏–Ω–∞'],

            '–≤–æ–π–Ω–∞': ['–±–∏—Ç–≤–∞', '—Å—Ä–∞–∂–µ–Ω–∏–µ', '–±–æ–π', '–∫–æ–Ω—Ñ–ª–∏–∫—Ç'],
            '–±–∏—Ç–≤–∞': ['–≤–æ–π–Ω–∞', '—Å—Ä–∞–∂–µ–Ω–∏–µ', '–±–æ–π', '–∫–æ–Ω—Ñ–ª–∏–∫—Ç'],
            '—Å—Ä–∞–∂–µ–Ω–∏–µ': ['–≤–æ–π–Ω–∞', '–±–∏—Ç–≤–∞', '–±–æ–π', '–∫–æ–Ω—Ñ–ª–∏–∫—Ç'],
            '–±–æ–π': ['–≤–æ–π–Ω–∞', '–±–∏—Ç–≤–∞', '—Å—Ä–∞–∂–µ–Ω–∏–µ', '–∫–æ–Ω—Ñ–ª–∏–∫—Ç'],
            '–∫–æ–Ω—Ñ–ª–∏–∫—Ç': ['–≤–æ–π–Ω–∞', '–±–∏—Ç–≤–∞', '—Å—Ä–∞–∂–µ–Ω–∏–µ', '–±–æ–π']
        };

        // –ë–∞–∑–∞ –∞–Ω—Ç–æ–Ω–∏–º–æ–≤ (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫)
        this.antonyms = {
            '–ª—é–±–æ–≤—å': ['–Ω–µ–Ω–∞–≤–∏—Å—Ç—å', '—Ä–∞–≤–Ω–æ–¥—É—à–∏–µ', '–≤—Ä–∞–∂–¥–∞'],
            '–Ω–µ–Ω–∞–≤–∏—Å—Ç—å': ['–ª—é–±–æ–≤—å', '–¥–æ–±—Ä–æ—Ç–∞', '–º–∏–ª–æ—Å–µ—Ä–¥–∏–µ'],
            '—Ä–∞–≤–Ω–æ–¥—É—à–∏–µ': ['–ª—é–±–æ–≤—å', '—Å—Ç—Ä–∞—Å—Ç—å', '–∏–Ω—Ç–µ—Ä–µ—Å'],

            '—Ä–∞–¥–æ—Å—Ç—å': ['–≥—Ä—É—Å—Ç—å', '–ø–µ—á–∞–ª—å', '—Ç–æ—Å–∫–∞', '–≥–æ—Ä–µ'],
            '—Å—á–∞—Å—Ç—å–µ': ['–≥—Ä—É—Å—Ç—å', '–ø–µ—á–∞–ª—å', '—Ç–æ—Å–∫–∞', '–≥–æ—Ä–µ'],
            '–≥—Ä—É—Å—Ç—å': ['—Ä–∞–¥–æ—Å—Ç—å', '—Å—á–∞—Å—Ç—å–µ', '–≤–µ—Å–µ–ª—å–µ', '–≤–æ—Å—Ç–æ—Ä–≥'],
            '–ø–µ—á–∞–ª—å': ['—Ä–∞–¥–æ—Å—Ç—å', '—Å—á–∞—Å—Ç—å–µ', '–≤–µ—Å–µ–ª—å–µ', '–≤–æ—Å—Ç–æ—Ä–≥'],
            '—Ç–æ—Å–∫–∞': ['—Ä–∞–¥–æ—Å—Ç—å', '—Å—á–∞—Å—Ç—å–µ', '–≤–µ—Å–µ–ª—å–µ', '–≤–æ—Å—Ç–æ—Ä–≥'],

            '—Å–≤–µ—Ç': ['—Ç—å–º–∞', '–º—Ä–∞–∫', '—Ç–µ–º–Ω–æ—Ç–∞'],
            '—Ç—å–º–∞': ['—Å–≤–µ—Ç', '—Å–∏—è–Ω–∏–µ', '–±–ª–µ—Å–∫'],
            '–º—Ä–∞–∫': ['—Å–≤–µ—Ç', '—Å–∏—è–Ω–∏–µ', '–±–ª–µ—Å–∫'],
            '—Ç–µ–º–Ω–æ—Ç–∞': ['—Å–≤–µ—Ç', '—Å–∏—è–Ω–∏–µ', '–±–ª–µ—Å–∫'],

            '—Å–∏–ª–∞': ['—Å–ª–∞–±–æ—Å—Ç—å', '–±–µ—Å—Å–∏–ª–∏–µ', '–Ω–µ–º–æ—â—å'],
            '–º–æ—â—å': ['—Å–ª–∞–±–æ—Å—Ç—å', '–±–µ—Å—Å–∏–ª–∏–µ', '–Ω–µ–º–æ—â—å'],
            '—Å–ª–∞–±–æ—Å—Ç—å': ['—Å–∏–ª–∞', '–º–æ—â—å', '–º–æ–≥—É—â–µ—Å—Ç–≤–æ'],
            '–±–µ—Å—Å–∏–ª–∏–µ': ['—Å–∏–ª–∞', '–º–æ—â—å', '–º–æ–≥—É—â–µ—Å—Ç–≤–æ'],

            '–¥–æ–±—Ä–æ': ['–∑–ª–æ', '–≤—Ä–µ–¥', '–∑–ª–æ–±–∞'],
            '–∑–ª–æ': ['–¥–æ–±—Ä–æ', '–±–ª–∞–≥–æ', '–¥–æ–±—Ä–æ—Ç–∞'],
            '–≤—Ä–µ–¥': ['–¥–æ–±—Ä–æ', '–±–ª–∞–≥–æ', '–ø–æ–ª—å–∑–∞'],

            '–º–∏—Ä': ['–≤–æ–π–Ω–∞', '–±–∏—Ç–≤–∞', '–∫–æ–Ω—Ñ–ª–∏–∫—Ç'],
            '–≤–æ–π–Ω–∞': ['–º–∏—Ä', '–ø–æ–∫–æ–π', '—Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ'],
            '–ø–æ–∫–æ–π': ['–≤–æ–π–Ω–∞', '–±–∏—Ç–≤–∞', '–±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ'],

            '–∂–∏–∑–Ω—å': ['—Å–º–µ—Ä—Ç—å', '–≥–∏–±–µ–ª—å'],
            '—Å–º–µ—Ä—Ç—å': ['–∂–∏–∑–Ω—å', '—Ä–æ–∂–¥–µ–Ω–∏–µ'],

            '–¥–µ–Ω—å': ['–Ω–æ—á—å', '—Ç—å–º–∞'],
            '–Ω–æ—á—å': ['–¥–µ–Ω—å', '—Å–≤–µ—Ç'],

            '–∂–∞—Ä–∞': ['—Ö–æ–ª–æ–¥', '–º–æ—Ä–æ–∑', '—Å—Ç—É–∂–∞'],
            '—Ö–æ–ª–æ–¥': ['–∂–∞—Ä–∞', '—Ç–µ–ø–ª–æ', '–∑–Ω–æ–π'],
            '—Ç–µ–ø–ª–æ': ['—Ö–æ–ª–æ–¥', '–º–æ—Ä–æ–∑', '—Å—Ç—É–∂–∞'],

            '–≤–µ—Ä—Ö': ['–Ω–∏–∑', '–¥–Ω–æ'],
            '–Ω–∏–∑': ['–≤–µ—Ä—Ö', '–≤–µ—Ä—à–∏–Ω–∞'],

            '–Ω–∞—á–∞–ª–æ': ['–∫–æ–Ω–µ—Ü', '—Ñ–∏–Ω–∞–ª'],
            '–∫–æ–Ω–µ—Ü': ['–Ω–∞—á–∞–ª–æ', '—Å—Ç–∞—Ä—Ç'],

            '–ø—Ä–∞–≤–¥–∞': ['–ª–æ–∂—å', '–æ–±–º–∞–Ω', '–≤—Ä–∞–Ω—å–µ'],
            '–ª–æ–∂—å': ['–ø—Ä–∞–≤–¥–∞', '–∏—Å—Ç–∏–Ω–∞'],
            '–∏—Å—Ç–∏–Ω–∞': ['–ª–æ–∂—å', '–æ–±–º–∞–Ω', '–≤—Ä–∞–Ω—å–µ']
        };

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–ª
        this.synonymAttractionStrength = 0.0025; // –°–∏–ª–∞ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è —Å–∏–Ω–æ–Ω–∏–º–æ–≤ (—É–≤–µ–ª–∏—á–µ–Ω–æ –≤ 8+ —Ä–∞–∑ –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞)
        this.antonymRepulsionStrength = 0.0040; // –°–∏–ª–∞ –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–Ω–∏—è –∞–Ω—Ç–æ–Ω–∏–º–æ–≤ (—É–≤–µ–ª–∏—á–µ–Ω–æ –≤ 8 —Ä–∞–∑ –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞)
        this.maxDistance = 400; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Å–∏–ª

        // –í–∏–∑—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        this.showConnections = true;
        this.synonymColor = 'rgba(34, 197, 94, 0.4)'; // –ó–µ–ª–µ–Ω—ã–π –¥–ª—è —Å–∏–Ω–æ–Ω–∏–º–æ–≤
        this.antonymColor = 'rgba(239, 68, 68, 0.4)'; // –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –∞–Ω—Ç–æ–Ω–∏–º–æ–≤

        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        this.synonymPairsFound = 0;
        this.antonymPairsFound = 0;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è—é—Ç—Å—è –ª–∏ —Å–ª–æ–≤–∞ —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏
    areSynonyms(word1, word2) {
        const w1 = word1.toLowerCase();
        const w2 = word2.toLowerCase();

        return this.synonyms[w1]?.includes(w2) || false;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è—é—Ç—Å—è –ª–∏ —Å–ª–æ–≤–∞ –∞–Ω—Ç–æ–Ω–∏–º–∞–º–∏
    areAntonyms(word1, word2) {
        const w1 = word1.toLowerCase();
        const w2 = word2.toLowerCase();

        return this.antonyms[w1]?.includes(w2) || false;
    }

    // –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏
    getRelationship(word1, word2) {
        if (this.areSynonyms(word1, word2)) return 'synonym';
        if (this.areAntonyms(word1, word2)) return 'antonym';
        return null;
    }

    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∏–ª—ã –º–µ–∂–¥—É –≤—Å–µ–º–∏ –±–ª–æ–∫–∞–º–∏
    applyForces() {
        const blocks = this.game.blocks.getAllBlocks();

        for (let i = 0; i < blocks.length; i++) {
            for (let j = i + 1; j < blocks.length; j++) {
                const blockA = blocks[i];
                const blockB = blocks[j];

                const wordA = blockA.wordData.text;
                const wordB = blockB.wordData.text;

                const relationship = this.getRelationship(wordA, wordB);

                if (relationship) {
                    this.applyForceBetween(blockA, blockB, relationship);
                }
            }
        }
    }

    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∏–ª—É –º–µ–∂–¥—É –¥–≤—É–º—è –±–ª–æ–∫–∞–º–∏
    applyForceBetween(bodyA, bodyB, relationship) {
        const dx = bodyB.position.x - bodyA.position.x;
        const dy = bodyB.position.y - bodyA.position.y;
        const distance = Math.sqrt(dx * dx + dy * dy);

        // –ù–µ –ø—Ä–∏–º–µ–Ω—è–µ–º —Å–∏–ª—É, –µ—Å–ª–∏ –±–ª–æ–∫–∏ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ
        if (distance > this.maxDistance) return;

        // –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤–µ–∫—Ç–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        const nx = dx / distance;
        const ny = dy / distance;

        let forceMagnitude;
        let direction;

        if (relationship === 'synonym') {
            // –ü—Ä–∏—Ç—è–∂–µ–Ω–∏–µ (–∫ —Ü–µ–Ω—Ç—Ä—É –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏)
            forceMagnitude = this.synonymAttractionStrength;
            direction = 1; // –ü—Ä–∏—Ç—è–≥–∏–≤–∞–µ–º
        } else if (relationship === 'antonym') {
            // –û—Ç—Ç–∞–ª–∫–∏–≤–∞–Ω–∏–µ (–æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏)
            forceMagnitude = this.antonymRepulsionStrength;
            direction = -1; // –û—Ç—Ç–∞–ª–∫–∏–≤–∞–µ–º
        }

        // –°–∏–ª–∞ –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é (–Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º —Å–∏–ª—å–Ω–∞—è –≤–±–ª–∏–∑–∏)
        const distanceFactor = 1 / (distance / 100 + 0.5);
        const finalForce = forceMagnitude * distanceFactor;

        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–∏–ª—É –∫ –æ–±–æ–∏–º —Ç–µ–ª–∞–º
        Matter.Body.applyForce(bodyA, bodyA.position, {
            x: nx * finalForce * direction,
            y: ny * finalForce * direction
        });

        Matter.Body.applyForce(bodyB, bodyB.position, {
            x: -nx * finalForce * direction,
            y: -ny * finalForce * direction
        });
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏
    drawConnections() {
        if (!this.showConnections) return;

        const canvas = this.game.physics.render.canvas;
        const context = this.game.physics.render.context;
        const blocks = this.game.blocks.getAllBlocks();

        context.save();

        for (let i = 0; i < blocks.length; i++) {
            for (let j = i + 1; j < blocks.length; j++) {
                const blockA = blocks[i];
                const blockB = blocks[j];

                const wordA = blockA.wordData.text;
                const wordB = blockB.wordData.text;

                const relationship = this.getRelationship(wordA, wordB);

                if (relationship) {
                    const dx = blockB.position.x - blockA.position.x;
                    const dy = blockB.position.y - blockA.position.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    // –ù–µ —Ä–∏—Å—É–µ–º –ª–∏–Ω–∏–∏ –¥–ª—è –¥–∞–ª–µ–∫–∏—Ö –±–ª–æ–∫–æ–≤
                    if (distance > this.maxDistance) continue;

                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∏–ª—è –ª–∏–Ω–∏–∏
                    if (relationship === 'synonym') {
                        context.strokeStyle = this.synonymColor;
                        context.setLineDash([]);
                        context.lineWidth = 3;
                    } else if (relationship === 'antonym') {
                        context.strokeStyle = this.antonymColor;
                        context.setLineDash([10, 5]);
                        context.lineWidth = 3;
                    }

                    // –†–∏—Å—É–µ–º –ª–∏–Ω–∏—é
                    context.beginPath();
                    context.moveTo(blockA.position.x, blockA.position.y);
                    context.lineTo(blockB.position.x, blockB.position.y);
                    context.stroke();

                    // –†–∏—Å—É–µ–º —Ç–æ—á–∫–∏ –Ω–∞ –∫–æ–Ω—Ü–∞—Ö
                    context.fillStyle = relationship === 'synonym' ? this.synonymColor : this.antonymColor;
                    context.beginPath();
                    context.arc(blockA.position.x, blockA.position.y, 5, 0, Math.PI * 2);
                    context.fill();
                    context.beginPath();
                    context.arc(blockB.position.x, blockB.position.y, 5, 0, Math.PI * 2);
                    context.fill();
                }
            }
        }

        context.restore();
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Å–≤—è–∑–µ–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–ª–æ–∫–∞
    checkNewBlock(newBlock) {
        const blocks = this.game.blocks.getAllBlocks();
        const newWord = newBlock.wordData.text;

        let foundSynonym = false;
        let foundAntonym = false;

        blocks.forEach(block => {
            if (block === newBlock) return;

            const word = block.wordData.text;
            const relationship = this.getRelationship(newWord, word);

            if (relationship === 'synonym' && !foundSynonym) {
                foundSynonym = true;
                this.synonymPairsFound++;
                this.game.ui.showNotification(`üß≤ –°–∏–Ω–æ–Ω–∏–º—ã –Ω–∞–π–¥–µ–Ω—ã: ${newWord} ‚Üî ${word}`);
                this.game.audio?.playSound('achievement');

                // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
                if (this.synonymPairsFound === 1) {
                    this.game.achievements.unlock('synonym_finder');
                }
            } else if (relationship === 'antonym' && !foundAntonym) {
                foundAntonym = true;
                this.antonymPairsFound++;
                this.game.ui.showNotification(`‚ö° –ê–Ω—Ç–æ–Ω–∏–º—ã –Ω–∞–π–¥–µ–Ω—ã: ${newWord} ‚Üî ${word}`);
                this.game.audio?.playSound('achievement');

                // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
                if (this.antonymPairsFound === 1) {
                    this.game.achievements.unlock('antonym_clash');
                }
            }
        });

        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∑–∞ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ
        if (this.synonymPairsFound + this.antonymPairsFound >= 10) {
            this.game.achievements.unlock('word_master');
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
    init() {
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏–ª –≤ —Ü–∏–∫–ª —Ñ–∏–∑–∏–∫–∏
        Matter.Events.on(this.game.physics.engine, 'beforeUpdate', () => {
            this.applyForces();
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å–≤—è–∑–µ–π
        Matter.Events.on(this.game.physics.render, 'afterRender', () => {
            this.drawConnections();
        });

        console.log('‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–≤—è–∑–µ–π —Å–ª–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
        console.log(`üìö –°–∏–Ω–æ–Ω–∏–º–æ–≤ –≤ –±–∞–∑–µ: ${Object.keys(this.synonyms).length}`);
        console.log(`‚öîÔ∏è –ê–Ω—Ç–æ–Ω–∏–º–æ–≤ –≤ –±–∞–∑–µ: ${Object.keys(this.antonyms).length}`);
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å–≤—è–∑–µ–π
    toggleConnections() {
        this.showConnections = !this.showConnections;
        return this.showConnections;
    }
}

// Export for use in other modules
window.WordRelationships = WordRelationships;
